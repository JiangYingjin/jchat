# JChat: 专为高级 AI 交互与工作流自动化设计的超级终端

[English](./README.md)

[![许可证: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**JChat 不仅仅是一个聊天应用，它是一个为开发者、研究员和 AI 重度用户打造的、功能强大的 AI 超级终端。它通过提供无与伦比的超长上下文处理能力、创新的组会话工作流引擎和 100% 的本地数据存储，将您与大语言模型（LLM）的交互提升到全新的生产力水平。**

---

## ✨ 核心特性

-   **🚀 无与伦比的上下文处理能力**: 内置 VS Code同款 Monaco 编辑器，为处理百万词元级的超长上下文进行了深度优化，无论是分析整个代码库，还是研读万字长文，都游刃有余。
-   **工作流自动化引擎**: 创新的“组会话”功能，支持从多个文件批量创建会话，并将指令“批量应用”到所有会话中，实现高度自动化，让 AI 成为您的专属工作团队。
-   **🛡️ 100% 本地优先，确保数据主权**: 所有会话、上下文和数据均默认存储在您本地的浏览器中，实现了极致的速度、离线访问能力和绝对的数据隐私。
-   **对话分支与任意消息编辑**: 从对话的任意节点创建分支，自由探索不同的思路；支持修改历史记录中的任意消息，提供前所未有的灵活性。
-   **强大的富文本支持**: 在聊天中直接渲染 LaTeX 数学公式、Mermaid 图表，并完整支持 GitHub Flavored Markdown。
-   **完善的数据备份系统**: 提供带版本管理的完整数据导入/导出功能，确保您的宝贵数据万无一失。

## 🤔 它为何与众不同？

当前的 AI 聊天工具通常只能应对简单的、一次性的问答。当您试图利用 AI 处理复杂任务时，往往会遇到以下瓶颈：

-   **上下文长度焦虑**: 想要 AI 分析一个代码库或一份长报告？对不起，上下文长度（Context Length）已达上限。您只能手动拆分、喂给 AI，过程苦不堪言。
-   **批量任务的噩梦**: 需要让 AI 按照同样的模式，处理 20 个不同的文件？您只能重复手动操作 20 次，效率极其低下。
-   **对话管理混乱**: 几十个对话混杂在一起，难以整理和回顾。想要探索一个问题的不同分支，只能开新的聊天，最终导致对话列表杂乱无章。
-   **数据隐私的担忧**: 您的所有对话数据都存储在云端，存在隐私泄露的风险。

**JChat 正是为解决这些问题而生。** 它不满足于做一个“玩具”，而是致力于成为一个真正的 **AI 生产力引擎**。通过将强大的编辑器、创新的工作流和本地优先的架构相结合，JChat 让您能够真正驾驭 AI，去完成过去难以想象的复杂任务。

## ⚙️ 功能详解

### 1. 专为超长上下文设计的编辑器

大多数 AI 工具的系统提示词（System Prompt）输入框，在面对数万词元的长文本时，都会变得异常难用，甚至导致浏览器卡顿、崩溃。

JChat 从根本上解决了这个问题。我们创造性地将强大的 **Monaco Editor** (VS Code 的内核) 无缝集成到了系统提示词的编辑流程中。这意味着，您可以像在专业的 IDE 中一样，轻松、流畅地编辑和管理长达百万词元的上下文。

- **告别卡顿与崩溃**: 无论您的上下文有多长，Monaco Editor 的虚拟化渲染技术都能确保极致的性能和流畅的编辑体验。
- **便捷的编辑体验**: 享受多光标、代码高亮（即将支持）、搜索替换等所有您熟悉的 IDE 功能。
- **实时的词元统计**: 编辑器右下角会实时显示当前上下文的词元（Token）数量，帮助您精确控制成本和输入。
- **智能模型切换**: JChat 会根据您输入的上下文长度，智能地为您推荐并切换到支持该长度的 AI 模型。

> 告别在小小的输入框里提心吊胆地修改 Prompt。在 JChat 中，上下文管理，终于成为了一种享受。

### 2. 强大的组会话与工作流引擎

JChat 引入了创新的“组会话”功能，将传统的、线性的聊天模式，升级为可组织、可批量操作的 **工作流模式**。

- **批量创建会话**: 从本地拖入多个文件（代码、文档、日志等），JChat 会自动为您创建一个会话组，其中每个文件都成为一个独立的、包含其内容的会话。
- **批量应用指令**: 针对一个组内的所有会话，您可以“批量应用”同一个指令。JChat 会在后台自动执行这些任务，并在完成后通知您。这对于批量重构、批量翻译、批量总结等场景，能指数级提升您的效率。
- **清晰的组织与导航**: 所有的组和组内会话都以清晰的树状结构展示，支持拖拽排序，让您轻松管理数十甚至上百个对话。
- **状态跟踪**: 每个组和会话都有明确的状态标识（正常、处理中、错误），让您对所有任务的进展一目了然。

> 想象一下，您只需下达一条指令：“用 TypeScript 重构这些组件”，然后 JChat 就会自动为您处理组内所有的 JS 文件。这就是 JChat 带来的工作流革命。

### 3. 高级对话管理

JChat 提供了一套精细化的对话管理工具，让您像管理代码一样管理您的对话。

- **对话分支 (Branching)**: 不再需要为了探索一个新想法而开启一个全新的聊天。您可以从对话历史的任意一点创建“分支”，在新分支上自由探索，同时保持主干对话的整洁。
- **任意消息编辑**: 无论是用户输入还是 AI 的回复，您都可以随时返回并进行编辑，然后从该点继续对话，极大地提升了调试和修正 Prompt 的灵活性。
- **带撤销的安全删除**: 不小心删错了消息、会话、甚至整个组？不用担心。JChat 提供了带“撤销”选项的延时删除功能，给您足够的时间反悔。

### 4. 本地优先架构与数据安全

JChat 的设计哲学是将用户的数据主权放在首位。

- **100% 本地存储**: 您的所有数据，从会话列表到每一条消息，都存储在您自己电脑的浏览器 IndexedDB 中。这意味着：
    - **极致的速度**: 无需等待网络请求，操作如丝般顺滑。
    - **离线访问**: 即使没有网络，您也可以随时回顾和整理您的对话历史。
    - **绝对的隐私**: 您的数据永远不会被上传到任何第三方服务器，彻底杜绝隐私泄露的担忧。
- **完善的备份与恢复**: 支持一键导出包含所有数据的 JSON 文件，并能通过该文件在新设备上完美恢复您的工作区，数据迁移轻松自如。

### 5. 富文本支持与数据导出

JChat 相信，技术交流不应局限于纯文本。

- **图文并茂**: 支持 GFM (GitHub Flavored Markdown) 的全部功能，您可以在对话中轻松使用表格、列表、代码块等。同时支持图文混排，上传的图片会直接在对话中展示。
- **数学公式**: 内置 KaTeX 渲染引擎，完美展示复杂的 LaTeX 数学公式。
- **流程图与图表**: 内置 Mermaid 渲染引擎，您可以用简单的文本描述，在聊天中直接生成流程图、序列图、甘特图等多种图表。
- **一键导出为图片**: 任何一段对话，都可以被一键导出为一张精美的、适合社交媒体分享的图片。

## 🚀 快速上手

1.  **克隆仓库**
    ```bash
    git clone https://github.com/JinnLock/JChat.git
    cd JChat
    ```

2.  **安装依赖**
    推荐使用 `yarn` 进行安装：
    ```bash
    yarn install
    ```

3.  **配置环境变量**
    在项目根目录下创建一个名为 `.env.local` 的文件，并填入您的配置。

    ```dotenv
    # .env.local

    # [必填] OpenAI API Key
    # 前往 https://platform.openai.com/account/api-keys 获取
    API_KEY="sk-..."

    # [可选] 访问密码
    # 用于限制访问，多个密码用英文逗号隔开
    CODE="your_access_code_1,your_access_code_2"

    # [可选] OpenAI API 代理地址
    # 如果您无法直接访问 OpenAI API，可以配置此项
    # 例如：https://api.openai.com
    BASE_URL=""

    # [可选] 指定可用模型
    # 覆盖默认模型列表，多个模型用英文逗号隔开
    # 例如：gpt-4,gpt-4-32k,gpt-3.5-turbo
    MODELS=""

    # [可选] SOCKS 或 HTTP 代理
    # 用于服务器绕过网络限制，需要配合代码修改
    # 例如：socks5://127.0.0.1:1080
    PROXY_URL=""
    ```

4.  **启动开发服务器**
    ```bash
    yarn dev
    ```

    应用将在 `http://localhost:3000` 上运行。

## 🛠️ 技术栈

-   **框架**: [Next.js](https://nextjs.org/) 15 (App Router)
-   **状态管理**: [Zustand](https://github.com/pmndrs/zustand)
-   **UI/组件库**: [React](https://react.dev/)
-   **数据存储**: [IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API) (通过 `localforage` 包装)
-   **代码编辑器**: [Monaco Editor](https://microsoft.github.io/monaco-editor/)
-   **Markdown/LaTeX**: [react-markdown](https://github.com/remarkjs/react-markdown) with `remark-gfm`, `rehype-katex`
-   **图表**: [Mermaid](https://mermaid.js.org/)
-   **拖拽**: [@dnd-kit](https://dndkit.com/)

## 🤝 参与贡献

我们欢迎并鼓励社区的贡献！如果您有任何想法、建议或发现了 Bug，请随时提出 Issue 或提交 Pull Request。

## 📄 许可证

本项目基于 [MIT 许可证](LICENSE) 开源。
